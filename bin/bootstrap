#!/bin/bash

# This script will ensure that you have Xcode developer tools installed before cloning
# the dotfiles repository from GitHub. 

# Ask for sudo upfront and keep alive until script has finished.
sudo -v
while true; do sudo -n true; sleep 60; kill -0 "$$" || exit; done 2>/dev/null &

# Check for CLI tools
xcode-select -p
if [[ $? != 0 ]] ; then
    echo "Xcode CLI tools not detected, proceeding with installation..."
    sudo xcode-select --install
else
    echo "Xcode CLI tools already installed, proceeding with bootstrap..."
fi

# mkdir ~/dotfiles
cd ~/dotfiles
# git clone https://github.com/colinshum/dotfiles.git

# Run installation script
set -euo pipefail 
ruby ./lib/macos.rb